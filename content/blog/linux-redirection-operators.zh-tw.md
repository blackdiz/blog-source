---
title: "Linux 2ã€1ã€& å’Œ >"
date: 2021-07-21T20:28:15+08:00
Tags: ["linux", "server side"]
Categories: ["note"]
---

å°è¨˜ä¸€ä¸‹ `command 2>&1 > /dev/null` å’Œ `command > /dev/null 2>&1` çš„å·®åˆ¥ã€‚é¦–å…ˆå…ˆçœ‹ `2>&1` çš„æ„æ€ã€‚åœ¨ Linux çš„ file descriptor ä¸­ï¼Œ1 è¡¨ç¤º stdout (æ¨™æº–è¼¸å‡º) è¡¨ç¤ºç¨‹å¼åŸ·è¡Œä¸­è¼¸å‡ºè¨Šæ¯çš„åœ°æ–¹ï¼Œé è¨­ç‚º terminalã€‚è€Œ 2 è¡¨ç¤º stderr (æ¨™æº–éŒ¯èª¤è¼¸å‡º) è¡¨ç¤ºç¨‹å¼åŸ·è¡Œä¸­ç™¼ç”ŸéŒ¯èª¤æ™‚è¼¸å‡ºéŒ¯èª¤è¨Šæ¯çš„åœ°æ–¹ï¼Œé è¨­ä¹Ÿæ˜¯ terminalã€‚

`>` è¡¨ç¤ºæŠŠ `>` å‰æ–¹çš„è¼¸å‡ºéƒ½å°åˆ° `>` å¾Œæ–¹çš„ç›®æ¨™ã€‚

è€Œ `>&` è¡¨ç¤ºæŠŠ `>&` å‰çš„ file descriptor æŒ‡å‘ `>&` å¾Œæ–¹çš„ file descriptorï¼Œ`&` è¡¨ç¤ºç›®æ¨™æ˜¯ file descriptor è€Œä¸æ˜¯æª”æ¡ˆã€‚

`/dev/null` æ˜¯å€‹ç‰¹æ®Šçš„ç›®æ¨™ï¼Œä»»ä½•è¼¸å…¥åˆ°å®ƒçš„è¨Šæ¯éƒ½æœƒæ¶ˆå¤±ä¸æœƒè¼¸å‡ºåˆ°ä»»ä½•å…¶ä»–åœ°æ–¹ã€‚

åœ¨äº†è§£å„éƒ¨åˆ†çš„ä½œç”¨å¾Œï¼Œç¾åœ¨æŠŠå®ƒå€‘çµ„åˆèµ·ä¾†çœ‹ï¼Œ`command 2>&1 > /dev/null` è¡¨ç¤ºåŸ·è¡Œ commandï¼ŒæŠŠ stderr è¼¸å‡ºçš„ç›®æ¨™æŒ‡å‘ stdout ç›®å‰è¼¸å‡ºçš„ç›®æ¨™ï¼Œå› ç‚º stdout ç›®å‰æŒ‡å‘çš„ç›®æ¨™æ˜¯ terminalï¼Œæ‰€ä»¥ stderr æŒ‡å‘çš„ç›®æ¨™å°±è®Šæˆ terminalï¼Œæœ€å¾Œ `> /dev/null` è¡¨ç¤ºæŠŠ stdout è¼¸å‡ºçš„ç›®æ¨™æŒ‡å‘ `/dev/null`ï¼Œæ‰€ä»¥æœ€çµ‚åŸ·è¡Œçš„çµæœå°±æ˜¯ stderr æœƒè¼¸å‡ºåˆ° terminal è€Œ stdout æœƒè¼¸å‡ºåˆ° `/dev/null`ã€‚
`command > /dev/null 2>&1` å‰‡æ˜¯åŸ·è¡Œ commandï¼Œ`> /dev/null` æœƒæŠŠ stdout è¼¸å‡ºç›®æ¨™æŒ‡å‘ `/dev/null`ï¼Œè€Œæœ€å¾Œé¢çš„ `2>&1` æœƒå†æŠŠ stderr è¼¸å‡ºçš„ç›®æ¨™æŒ‡å‘ç›®å‰ stdout çš„è¼¸å‡ºç›®æ¨™ï¼Œæ‰€ä»¥ä¹ŸåŒæ¨£è®Šæˆ `/dev/null`ï¼Œå› æ­¤æœ€çµ‚åŸ·è¡Œçµæœæœƒæ˜¯ stdout å’Œ stderr éƒ½æœƒè¼¸å‡ºåˆ° `/dev/null` ä¸­ã€‚

æ‰€ä»¥çµè«–æ˜¯ `command 2>&1 > /dev/null` ä¾ç„¶æœƒè¼¸å‡ºéŒ¯èª¤è¨Šæ¯åˆ° terminal ä¸Šï¼Œè€Œ `command > /dev/null 2>&1` å‰‡ä¸æœƒè¼¸å‡ºä»»ä½•è¨Šæ¯ã€‚

---
åƒè€ƒè³‡æ–™ï¼š
- [Bash One-Liners Explained, Part III: All about redirections](https://catonmat.net/bash-one-liners-explained-part-three)

å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„